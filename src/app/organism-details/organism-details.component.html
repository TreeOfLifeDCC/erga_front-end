<br>
<div class="container">
    <div class="item0"></div>
    <div class="item2">
        <mat-card class="main-card">
            <mat-card-title style="text-align: center">{{ data?.accession }}
            </mat-card-title>
            <mat-card-actions>
                <div fxLayout="column">
                    <dl>
                        @if (data?.accession) {
                            <dt><b>BioSamples ID:</b></dt>
                            <dd class="col-sm-9">
                                <a style="text-decoration: none;" href="http://www.ebi.ac.uk/biosamples/samples/{{data?.accession}}" target="_blank">
                                    {{data?.accession}}
                                </a>
                            </dd>
                        }
                        @if (data?.tracking_status) {
                            <dt><b>Tracking Status:</b></dt>
                            <dd>{{ data?.tracking_status }}</dd>
                        }
                        @if (data?.organism.text) {
                            <dt><b>Organism:</b></dt>
                            <dd>{{ data?.organism.text }}</dd>
                        }
                        @if (data?.taxId) {
                            <dt><b>Tax ID:</b></dt>
                            <dd>{{ data?.taxId }}</dd>
                        }
                    </dl>

                    <mat-divider></mat-divider>

                    <dl>
                        @for (item of data?.customFields; track $index) {
                            <dt><b>{{ item.name }}:</b></dt>
                            <dd>{{ item.value }}</dd>
                        }
                    </dl>
                </div>

            </mat-card-actions>
        </mat-card>

        <br>
        @if (specimensDataLength !== 0) {
            <h1>Related Specimens</h1>
            @if (isLoadingResults || isRateLimitReached) {
                <div class="example-loading-shade">
                    @if (isLoadingResults) {
                        <mat-spinner></mat-spinner>
                    }
                    @if (isRateLimitReached) {
                        <div class="example-rate-limit-reached">
                            Something went wrong, please try again!
                        </div>
                    }
                </div>
            }
            <mat-form-field class="searchField">
                <mat-label>Filter</mat-label>
                <input matInput (keyup)="applyFilter($event)"
                       placeholder="Ex. Mia" #input>
            </mat-form-field>
            <table mat-table [dataSource]="specimensData" matSort>
                <ng-container matColumnDef="accession">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        BioSample ID
                    </th>
                    <td mat-cell *matCellDef="let row">
                        <a mat-button
                           [routerLink]="['/specimen', row.accession]">{{ row.accession }}</a>
                        @if (checkNagoyaProtocol(row)) {
                            <mat-chip
                                    style="margin-bottom: 5px; background-color: yellow; color: black">
                                <a mat-button
                                   href="https://drive.google.com/file/d/1tkTdo-dI30YFokE2YpwmzP9onhrrEyhD/view?usp=drive_link">
                                    Nagoya Protocol</a>
                            </mat-chip>
                        }
                    </td>
                </ng-container>

                <ng-container matColumnDef="organism">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Organism
                    </th>
                    <td mat-cell *matCellDef="let row"> {{ row.organism }}</td>
                </ng-container>

                <ng-container matColumnDef="commonName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Common Name
                    </th>
                    <td mat-cell *matCellDef="let row"> {{ row.commonName }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="organismPart">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Organism Part
                    </th>
                    <td mat-cell
                        *matCellDef="let row"> {{ row.organismPart }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="sex">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Sex
                    </th>
                    <td mat-cell *matCellDef="let row"> {{ row.sex }}</td>
                </ng-container>

                <tr mat-header-row
                    *matHeaderRowDef="specimensDisplayedColumns"></tr>
                <tr mat-row
                    *matRowDef="let row; columns: specimensDisplayedColumns;"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"
                           aria-label="Select page of users"
                           #metadataPaginator
                           [length]="resultsLength"></mat-paginator>

        }

    </div>
    <div class="item3"></div>
</div>
